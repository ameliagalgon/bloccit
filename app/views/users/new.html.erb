<h2>Sign up</h2>

<div class="row">
     <div class="col-md-8">
          <%= form_for @user, url: { action: :confirm } do |f| %>
               <% if @user.errors.any? %>
                    <div class="alert alert-danger">
                         <h4><%= pluralize(@user.errors.count, "error") %>.</h4>
                         <ul>
                              <% @user.errors.full_messages.each do |msg| %>
                                   <li><%= msg %></li>
                              <% end %>
                         </ul>
                    </div>
               <% end %>

               <%= form_group_tag(@user.errors[:name]) do %>
                    <%= f.label :name %>
                    <%= f.text_field :name, autofocus: true, class: 'form-control', placeholder: "Enter name" %>
               <% end %>
               <%= form_group_tag(@user.errors[:email]) do %>
                    <%= f.label :email %>
                    <%= f.email_field :email, class: 'form-control', placeholder: "Enter email" %>
               <% end %>
               <%= form_group_tag(@user.errors[:password]) do %>
                    <%= f.label :password %>
                    <%= f.password_field :password, class: 'form-control', placeholder: "Enter password" %>
               <% end %>
               <%= form_group_tag(@user.errors[:password_confirmation]) do %>
                    <%= f.label :password_confirmation %>
                    <%= f.password_field :password_confirmation, class: 'form-control', placeholder: "Enter password confirmation" %>
               <% end %>
               <div class="form-group">
                    <%= f.submit "Sign up", class: 'btn btn-success' %>
               </div>
          <% end %>
     </div>
</div>

<script>
     var getCookie = function(cname) {
         var name = cname + "=";
         var decodedCookie = decodeURIComponent(document.cookie);
         var ca = decodedCookie.split(';');
         for(var i = 0; i <ca.length; i++) {
             var c = ca[i];
             while (c.charAt(0) == ' ') {
                 c = c.substring(1);
             }
             if (c.indexOf(name) == 0) {
                 return c.substring(name.length, c.length);
             }
         }
         return "";
     }

     //populate with cookie values
     document.getElementById("user_name").value = getCookie("user_name");
     document.getElementById("user_email").value = getCookie("user_email");

</script>
